@model EventManagmentSystem.Models.ViewModel.EventViewModel

@{
    ViewData["Title"] = "Event";
}

<form method="post" action="/Booking/Book">
    <div class="jumbotron">
        <h1 class="display-4" id="description">@Model.Title</h1>
        <hr class="my-4">
        <p class="lead" id="description">@Model.Description</p>
        <hr class="spacingLine-light" />
        <div class="form-group">
            <label for="date" style="font-weight: bold;">Datum und Uhrzeit</label>
            <p class="event-date" id="date">@Model.Date</p>
        </div>
        <br />
        <div class="form-group">
            <label for="price" style="font-weight: bold;">Preis</label>
            <p class="event-price" id="price">@Model.Price €</p>
        </div>
        <br />
        <div class="form-group">
            <label for="tickets" style="font-weight: bold;">Verfügbare Tickets</label>
            <p class="event-tickets" id="tickets">@Model.AmountOfTickets</p>
        </div>
        <br />
    </div>
</form>

<script>
    function validateNumberOfTickets() {
        var availableTickets = @Model.AmountOfTickets;
        var numberOfTickets = parseInt(document.getElementById("numberOfTickets").value);

        if (numberOfTickets > availableTickets) {
            alert("Die Anzahl der angeforderten Tickets darf nicht größer sein als die verfügbare Anzahl von Tickets.");
            return false;
        }
        return true;
    }
</script>

   @if (Context.Session.GetString("UserRole").Equals("NormalUser"))
    {
    <form asp-controller="Payment" asp-action="Payment" method="get" onsubmit="return validateNumberOfTickets()">
        <!-- Formularfelder für Event-Details und Anzahl der Tickets -->
        <input type="hidden" name="eventId" value="@Model.EventId" />
        <label for="numberOfTickets">Wie viele Tickets?</label>
        <input class="form-control" type="number" id="numberOfTickets" name="numberOfTickets" min="1" style="width: 5%; margin-bottom: 10px; margin-top: 10px;" required>
        <!--Wenn der user ein Seller ist soll das nicht angezeigt werden-->
        <button type="submit" class="btn btn-outline-primary">Tickets buchen</button>
    </form>
    }
    else
    {
        <p>Als Verkäufer können Sie keine Tickets für Ihre eigenen Veranstaltungen kaufen.</p>
    }
